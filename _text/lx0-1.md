---
section: os
title: "Установка ОС Linux в виртуальную машину"
---




### Зачем пользоваться виртуальной машиной?


![alt_text](/assets/images/os_text/lx01-1.png "image_tooltip")


Для работы с операционной системой необходимо ее установить на компьютер. Так как это основная программа компьютера, процесс ее установки сильно отличается от установки обычной прикладной программы. Он связан с переразметкой жесткого диска, освобождением места для новой операционной системы, перезаписью системного загрузчика. И в любом случае, в каждый конкретный момент на компьютере может работать только одна операционная система. Чтобы переключиться в другую, вам нужно перезагрузить компьютер и запустить другую установленную операционную систему. Если вы всего лишь хотите попробовать новую для вас среду, это может быть слишком обязывающим. Более того, в этом процессе легко сделать что-то не так, а ошибки чреваты потерей информации и повреждением существующих на компьютере программ и данных.

Но есть способ избежать лишнего риска и усилий. Существуют специальные программные средства, которые позволяют запускать одну операционную систему внутри другой, как обычную программу. Для этого они эмулируют так называемый виртуальный компьютер (виртуальную машину). А уже с этой виртуальной машиной можно делать все что угодно, в том числе, установить любую операционную систему, без риска навредить основному, физическому компьютеру. Существует несколько таких программ виртуализации одна из самых популярных - бесплатная VirtualBox от Oracle. Ее мы и будем рекомендовать использовать для установки операционной системы Linux. 

Виртуальные машины - это очень полезные программы. И не только чтобы проще можно было пробовать новые операционные системы. Многим разработчикам требуется тестировать работу создаваемой программы в разных операционных системах, разных дистрибутивах или версиях. Часто разработчики создают программы для другой операционной системы, нежели установленная на их рабочем компьютере. Поэтому виртуальные машины - незаменимый инструмент разработки и тестирования программного обеспечения. Есть и еще один способ применения. Некоторые программы настолько сложны в установке, что они распространяются в виде готовой виртуальной машины, чтобы их можно было попробовать, или даже развернуть в виде виртуалки в рабочее окружение. Наконец, виртуальные машины - неотъемлемый инструмент облачных технологий. Многие облачные сервисы работают на виртуальных машинах - так гораздо проще создавать новые конфигурации, а при необходимости - удалить машину и все содержимое.

Еще одно преимущество виртуальных машин - вы можете одновременно запустить несколько и переключаться между ними без перезагрузки. Они действительно работают как обычные программы - можно запустить столько процессов, сколько помещается в оперативную память. 

Одной из особенностей работы в виртуальной машине является полная изоляция. Все, что происходит в виртуальной машине никак напрямую не влияет на физическую машину (хост). Это очень полезно в плане безопасности. Например, на виртуальной машине можно проверять работу нестабильных или потенциально опасных программ. Кроме того, если вы что-то испортите в виртуальной машине, можно просто начать все заново. А это важно, ведь в процессе обучения мы не должны бояться совершать незнакомые действия.

Но что, если все-таки хочется при работе в виртуальной машине обратиться вовне? Виртуальные машины можно объединять в сеть. Можно даже создать сеть между виртуальной машиной и основной (хостом). Причем на уровне сетевых протоколов не будет видно никакой разницы между работой с виртуальной или физической машиной. Это делает виртуалки незаменимыми для тестирования сетевых приложений или тестирования настроек сети. Конечно, это подразумевает, что вы можете в виртуальной машине иметь доступ в Интернет. Причем, существует много способов подключения виртуальных машин, о которых мы скажем дальше. И можно, например, эмулировать трансляцию сетевых адресов, если вы хотите сделать такое подключение односторонним.

Еще одно преимущество работы с виртуальными машинами по сравнению с реальными - возможность в любой момент сделать резервную копию всей виртуальной машины на диск, вместе со всеми данными и установленными программами. Существуют специальные форматы файлов, в которые можно сохранить полностью виртуальную машину. Конечно, такая копия (образ) машины занимает порядочно места (это сильно зависит, сколько места занято на диске виртуальной машины), но она позволяет еще больше обезопасить себя от каких-либо сбоев. Ведь вы можете создать копию машины в момент ее стабильной работы, а если произошел сбой или ошибка, просто восстановиться из нее и продолжать работать или экспериментировать. Главное, не забывать вовремя делать бекапы. 

Но, конечно, у всего есть недостатки. Главный минус виртуальных машин - большое потребление ресурсов компьютера. Чудес не бывает и здесь, и при запуске операционной системы требования по оперативной памяти, процессору и месту на жестком диске никуда не исчезают. Помните, что любая виртуальная машина потребляет ресурсы машины-хоста. Любые программы, выполняющиеся на виртуальной машине в реальности выполняются на физическом процессоре хоста. Так что обмануть процессор и запустить множество тяжелых приложений, которые в нормальном режиме он не тянет, не получится. Кстати, помимо самих программ в виртуальной машине, в этот же момент на процессоре будет выполняться сама основная операционная система, запущенные в ней программы (в том числе сам менеджер виртуальных машин), так что в целом производительность только несколько снижается, но никак не может быть повышена. 

То же самое относится и к памяти. Для работы виртуалки вы должны выделить для нее в реальной оперативной памяти необходимый объем. И еще оставить место для основной системы. А если вы хотите запустить сразу несколько виртуалок - то надо, чтобы суммарный объем их памяти был меньше, чем у вас физически в компьютере. То же можно сказать и про объем жесткого диска. Виртуальная машина хранит все свои файлы на реальном жестком диске, в специальном файле (виртуальном жестком диске). Помните, что для комфортной работы операционной системы нужно как минимум несколько десятков гигабайт пространства. И столько свободного места у вас должно быть на физическом диске.

Но в реальности, многочисленные плюсы от использования виртуальных машин перевешивают недостатки. Как и любой инструмент, виртуальные машины нужно использовать для решения определенных задач. Иногда бывает такое, что они не нужны или вредны. Но для того, чтобы протестировать операционную систему без реальной установки, нет способа лучше. 

Выводы:



1. Установка операционной системы - это сложный и требовательный процесс.
2. Виртуальные машины позволяют работать с ОС без установки на реальный компьютер.
3. Это сильно упрощает тестирование разных ОС.
4. Можно запускать несколько виртуалок одновременно.
5. Виртуальные машины безопаснее - можно не бояться сделать что-то не так.
6. Между виртуальными машинами можно создавать сети.
7. Можно создавать резервные копии виртуальных машин.
8. Недостаток виртуальных машин - небольшое снижение производительности.


### Что необходимо для установки?

Давайте рассмотрим процесс установки ОС Linux на виртуальную машину. Для этого на понадобится, во-первых, сам менеджер виртуальных машин. Это программа, которая управляет виртуалками - позволяет создавать, запускать, удалять виртуальные машины, делать их резервные копии и многое другое. Существует несколько альтернативных программ, но мы будем использовать Oracle VirtualBox. Она бесплатная, дружественная к новичками и имеет широкие возможности. Вы ее можете скачать для своей операционной системы с официального сайта.

Во-вторых, нам понадобится дистрибутив операционной системы. В случае с Linux мы тоже можем скачать его с официального сайта. Для обучения мы выбрали дистрибутив Linux Mint. Используем дистрибутив Linux Mint, скачанный заранее, в формате iso.


![alt_text](/assets/images/os_text/lx01-2.png "image_tooltip")


Для работы в виртуальной машине необходимо:



1. Физический компьютер с основной операционной системой (хост).
2. Менеджер виртуальных машин. Рекомендуем использовать Oracle VirtualBox.
3. Дистрибутив нужной (гостевой) операционной системы.
4. Свободное место на физическом жестком диске и оперативная память для работы.
5. Примерно полчаса на установку.


### Как создать виртуальную машину?

Для начала работы необходимо создать виртуальную машину - то есть программный эмулятор компьютера, в который можно будет установить любую операционную систему и работать с ним изолированно, как с отдельным компьютером. 

Для этого можно нажать соответствующую кнопку, или выбрать пункт меню. Указываем имя, тип и версию ОС. Имя используется для того, чтобы отличить одну виртуалку от другой, ведь мы можем создать их любое количество.


![alt_text](/assets/images/os_text/lx01-3.png "image_tooltip")


Обратите внимание на версию и разрядность создаваемой ОС. Она должна соответствовать дистрибутиву, который вы собираетесь установить на виртуальную машину. В нашем случае, выбираем Linux в типе. В поле “Версия” обратите особе внимание на разрядность операционной системы. Все современные дистрибутивы являются 64-разрядными. Бывает такое, что в списке вы видите только 32-разрядные версии. В такой виртуалке 64 дистрибутив работать не будет (наоборот, кстати, все работает - вы можете установить 32-битную ОС в 64-разрядную машину). Обычно, это свидетельствует о том, что на вашем компьютере отключена аппаратная виртуализация. Посмотрите, как включить ее в документации к BIOS вашей материнской платы.


![alt_text](/assets/images/os_text/lx01-4.png "image_tooltip")


Указываем объем памяти. Рекомендуется использовать не менее 1 ГБ памяти для современных дистрибутивов. Лучше резервировать как можно больше памяти, но не более половины от физического объема реального компьютера. Если вы планируете запускать несколько виртуалок одновременно, резервируйте еще меньше памяти, чтобы они все вместе поместились в существующую оперативку. Некоторые минималистичные дистрибутивы, или системы без графической оболочки требуют гораздо меньше оперативной памяти. Например, серверный Debian 10 можно запустить с 192 МБ памяти.


![alt_text](/assets/images/os_text/lx01-5.png "image_tooltip")


Создаем новый виртуальный жесткий диск. Физически он представляет собой большой файл на вашем жестком диске, а виртуальная машина будет видеть его как отдельный жесткий диск.


![alt_text](/assets/images/os_text/lx01-6.png "image_tooltip")


Указываем тип жесткого диска. Это определяет формат файла, который будет использоваться для хранения виртуального жесткого диска. Разные программы виртуализации используют разные форматы жестких дисков. Значение по умолчанию можно оставить, если Вы не планируете миграцию ВМ на другие программы виртуализации.


![alt_text](/assets/images/os_text/lx01-7.png "image_tooltip")


Выбираем формат хранения данных (динамический ВЖД или фиксированный). Фиксированный ВЖД сразу займет выбранный вами объем на диске. Динамический жесткий диск будет занимать столько места, сколько занимают на нем фактически записанные файлы виртуальной машины. Рекомендуется всегда выбирать динамический жесткий диск, так как это сильно экономит место на физической машине.


![alt_text](/assets/images/os_text/lx01-8.png "image_tooltip")


Указываем размер виртуального жесткого диска и путь его хранения. Если не менять его, то по умолчанию будет выбрана папка, в которой хранятся все виртуальные машины Oracle VM VirtualBox. Обратите внимание на путь к файлу ЖД, если у вас ограничен объем системного раздела. Насчет объема - для современных дистрибутивов достаточно от 20 до 50 ГБ для комфортной работы.

Теперь виртуальная машина создана. Однако, рекомендуется еще выполнить одну операцию. Выделяем созданную виртуалку и находим в интерфейсе пункт “Настройки”. Здесь можно поменять все настройки виртуального аппаратного обеспечения. Нам нужна вкладка “Дисплей”. 


![alt_text](/assets/images/os_text/lx01-9.png "image_tooltip")


В настройках, в пункте «Дисплей» увеличиваем объем видеопамяти до 128 Мб и ставим галочку на пункте «Включить 3D-ускорение» для лучшей визуализации системы.


### Как установить Linux на виртуальную машину?

Теперь наша виртуальная машина создана и настроена. Все готово к началу установки в нее операционной системы. Процесс установки полностью аналогичен установке на реальный компьютер, ведь используется тот же дистрибутив и та же установочная программа. Но сначала нужно подключить образ дистрибутива к виртуальной машине. 

В пункте «Носители» настроек виртуальной машины выбираем образ оптического диска для подключения образа уже существующего диска. Нам нужно выбрать предварительно скачанный образ дистрибутива в формате iso.


![alt_text](/assets/images/os_text/lx01-10.png "image_tooltip")


В принципе, это можно сделать и при первом старте виртуалки.

Запускаем виртуальную машину.


![alt_text](/assets/images/os_text/lx01-11.png "image_tooltip")


Мы видим окно операционной системы, запущенной в режиме LiveCD. Все современные дистрибутивы позволяют вам опробовать работу системы и без установки, но при первой же перезагрузке все данные, настройки и программы не будут сохранены. Поэтому, на надо именно установить ОС.

Устанавливаем Linux Mint, выбрав соответствующий ярлык на рабочем столе. Мы увидим программу установки:


![alt_text](/assets/images/os_text/lx01-12.png "image_tooltip")


Выбираем язык ОС. Эта настройка влияет и на язык инсталлятора, и на язык системы после установки. Также исходя из выбранного языка будет предложена раскладка клавиатуры.


![alt_text](/assets/images/os_text/lx01-13.png "image_tooltip")


Устанавливаем стороннее ПО для видеокарты и устройств, для более комфортного использования ОС. Программы установки этой специальной галочкой удостоверяются, что вы хотите установить некоторые полезные компоненты и драйверы (например, MP3), которые не являются свободными программами.


![alt_text](/assets/images/os_text/lx01-14.png "image_tooltip")


Выбираем, как поступить с жестким диском. Если установщик найдет уже установленные ОС, то предложит установить данную систему рядом с ними. Если вы устанавливаете данный дистрибутив как единственный, можно стереть весь диск.


![alt_text](/assets/images/os_text/lx01-15.png "image_tooltip")


Подтверждаем намерение стереть весь жесткий диск. После этого уже нельзя будет вернуться назад, ведь новая таблица разделов начнет записываться на жесткий диск. Если мы работаем в виртуалке, то можем ничего не бояться, но на реальном компьютере это подразумевает очистку всех данных с этого жесткого диска.

После данного шага программа установки начнет копировать файлы операционной системы на диск. Этот процесс может занять несколько минут. Поэтому в это время программа установки предложит вам внести еще некоторые настройки.


![alt_text](/assets/images/os_text/lx01-16.png "image_tooltip")


Выбираем часовой пояс в котором мы находимся.



![alt_text](/assets/images/os_text/lx01-17.png "image_tooltip")


Выбираем необходимую раскладку клавиатуры.


![alt_text](/assets/images/os_text/lx01-18.png "image_tooltip")


Вносим данные для авторизации как суперпользователь (имя пользователя, пароль), при необходимости отмечаем пункт «Входить в систему автоматически», чтобы не вводить пароль каждый раз. Но это никак не повлияет на безопасность т.к. при выполнении действий, которые могут сильно повлиять на систему, она все равно запросит ввод пароля.

Внимание! Не забудьте пароль суперпользователя! Иначе придется переустанавливать систему с нуля.

После этого система начнет установку, а в конце попросит перезагрузить компьютер для завершения установки.


![alt_text](/assets/images/os_text/lx01-19.png "image_tooltip")


При включении появится данное окно. Установка успешно завершена!

После этого виртуальная машина перезагрузится и вы сможете начать работу в свежей операционной системе. Очень рекомендуем вам погрузиться в ОС, познакомиться с графическим интерфейсом, попользоваться прикладными программами, то есть всячески освоиться в системе. А мы проложим изучением командной строки Linux.


### Практическая работа - установка Linux на виртуальную машину


#### Цель работы

Научиться основным приемам работы с виртуальной машиной. Освоить процесс установки операционной системы Linux. Познакомиться с механизмом создания образов виртуальной машины.


#### Задания для выполнения



1. Скачать дистрибутив Linux Mint;
2. Создать гостевую машину;
3. Запустить виртуальную машину;
4. Установить на неё Linux;
5. Выключить виртуальную машину;
6. Экспортировать её в .OVA образ;
7. На его основе создать ещё одну виртуальную машину;
8. Поменять название второй виртуальной машины;
9. Запустить обе;
10. Удалить вторую виртуальную машину (вместе со всеми файлами).


#### Методические указания

Для успешного выполнения данной работы необходимо познакомиться с понятием виртуализации, виртуальной машины. Пример материалов по теме:



* [Понятие виртуальной машины](https://ru.wikipedia.org/wiki/%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D0%B0)
* [http://www.team.ru/virt_intro.php](http://www.team.ru/virt_intro.php)
<!-- * [https://www.oracle.com/ru/virtualization/virtualbox/index.html](https://www.oracle.com/ru/virtualization/virtualbox/index.html) -->

Пошаговое описание процесса создания виртуальной машины и установки Linux Mint в нее описан в предыдущей главе.


#### Контрольные вопросы



1. В чем преимущества работы в виртуальной машине?
2. В чем недостатки работы в виртуальной машине?
3. Для чего нужен образ виртуальной машины?
4. Что такое установка операционной системы?
5. Можно ли запустить две виртуальные машины одновременно?


#### Дополнительные задания



1. Создайте новую виртуальную машину с жестким диском на 50 ГБ.
2. Установите на нее Windows, задав размер раздела 30 ГБ. Если у Вас нет дистрибутива Windows, создайте пустой раздел такого размера с файловой системой NTFS.
3. Установите Linux mint на эту виртуальную машину, используя ручной режим разметки диска так, чтобы не стереть существующий раздел NTFS.
4. Убедитесь что обе операционные системы загружаются и функционируют.
5. С помощью образа виртуальной машины попробуйте перенести ваш виртуальный компьютер на другой физический компьютер. Вся настроенная ОС должна сохраниться.
6. Удалите созданные виртуальные машины.