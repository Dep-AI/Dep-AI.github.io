---
section: os
title: ""
---


### Основы работы с программой tmux

#### Цель работы

Освоить основные приемы работы с программой tmux при удаленной работе с
машиной по протоколу ssh.

#### Задания для выполнения

1.  Начните рабочую сессию.

2.  При необходимости установите программу tmux.

3.  Запустите программу tmux.

4.  Создайте новое окно. Назовите его window1.

5.  Запустите в первом окне программу htop. Назовите его htop.

6.  Второе окно разделите вертикально.

7.  Разделите одну из этих панелей горизонтально.

8.  Выйдите из одного из сеансов для того, чтобы закрыть соответствующую панель.

9.  Выйдите из tmux.

10. Запустите tmux, указав имя новой сессии.

11. Запустите htop.

12. Отсоединитесь от сессии.

13. Убедитесь, что процесс htop еще запущен.

14. Выйдите из сессии.

15. Начните сессию заново.

16. Выведите список активных сессий.

17. Подключитесь к той же сессии.

#### Методические указания

Tmux (terminal multiplexor) - популярная программа, значительно
облегчающая работы в терминале на удаленной машине. Среди
возможностей данной программы:

* разделение экрана на несколько консолей

* создание нескольких экранов

* сохранение выполняющихся процессов ну удаленной машине после выхода из сессии

* расшаривание ssh сессий нескольким пользователям

Сочетание клавиш \<Ctrl\>+B позволяет вводить команды tmux. Наиболее
применимые команды:

* ctrl-b c - запуск нового окна;

* ctrl-b , - переименование окна;

* ctlb-b p - переключение к предыдущему окну;

* ctlb-b n - переключение к следующему окну;

* ctlb-b w - вывести список окон;

* ctlb-b % - разделение окна вертикально на две панели;

* ctlb-b “ - разделение окна горизонтально;

* ctlb-b d - отсоединиться от сессии;

Для начала работы необходимо подключиться к удаленной машине по ssh.
Конечно, можно использовать программу tmux на локальной машине для
расширения возможностей терминала, но здесь мы рассмотрим возможности
этой программы при удаленном доступе к терминалу.

![](/assets/images/os_text/lx2-2/image16.png)

При необходимости нужно установить tmux, введя команду

sudo apt install tmux

![](/assets/images/os_text/lx2-2/image21.png)

Теперь можно запустить tmux, введя одноименную команду:

![](/assets/images/os_text/lx2-2/image7.png)

На экране мы видим главное окно программы tmux:

![](/assets/images/os_text/lx2-2/image9.png)

Обратите внимание на нижнюю строчку. Здесь перечислены открытые окна
терминала. Можно воспринимать их как вкладки, по которым можно
перемещаться. Мы можем создать новое окно:

![](/assets/images/os_text/lx2-2/image8.png)

Теперь мы видим, что в нижней строке появилось окно 1. Звездочкой
обозначено текущее окно.

Мы можем также переименовать окно, чтобы лучше ориентироваться. Это
бывает полезно для организации рабочего пространства.

![](/assets/images/os_text/lx2-2/image5.png)

Теперь мы имеем второе окно (под номером 1, так как нумерация начинается
с 0) с именем.

![](/assets/images/os_text/lx2-2/image20.png)

Давайте для иллюстрации запустим в первом окне команду htop:

![](/assets/images/os_text/lx2-2/image19.png)

Tmux позволяет вывести список всех созданных окон, в котором можно
перемещаться между ними. Также доступен предварительный просмотр
содержимого каждого окна:

![](/assets/images/os_text/lx2-2/image18.png)

Работая в этой программе можно также разделять пространство в отдельно
взятом окне на две панели. В каждой панели можно работать независимо,
вводить команды и наблюдать результат одновременно.

![](/assets/images/os_text/lx2-2/image1.png)

Текущее окно или панель можно разбить на две панели как вертикально, так
и горизонтально. Панели можно дробить неограниченное число раз:

![](/assets/images/os_text/lx2-2/image10.png)

При выполнении команды exit панель закрывается.

![](/assets/images/os_text/lx2-2/image17.png)

Если эта панель была единственной в окне - то закроется все окно, а если
окно было единственным - программа tmux завершится.

![](/assets/images/os_text/lx2-2/image6.png)

Еще одной возможностью tmux является работа с сессиями. Если
использовать сессии, то вместо выхода из сессии подключения
к удаленной машине можно отключиться от сессии, а при повторном
подключении сессия сессия сохранит свое состояние. То есть, все
процессы, запущенные на удаленной машине так и будут продолжать
выполняться.

Для запуска сессии необходимо запустить tmux со специальным параметром,
указав имя сессии:

![](/assets/images/os_text/lx2-2/image11.png)

Запустим в этой сессии какой-нибудь интерактивный процесс:

![](/assets/images/os_text/lx2-2/image14.png)

Нажав сочетание клавиш ctrl-b d, отсоединимся от сессии:

![](/assets/images/os_text/lx2-2/image3.png)

При помощи команд терминала можно убедиться, что программа, которую мы
запустили все еще работает, несмотря на то, что мы вышли из
родительского процесса.

![](/assets/images/os_text/lx2-2/image12.png)

Можно даже выйти из подключения к удаленной машине и спустя некоторое
время зайти обратно.

![](/assets/images/os_text/lx2-2/image13.png)

При запуске tmux можно вывести список всех открытых сессий:

![](/assets/images/os_text/lx2-2/image4.png)

Соответственно, можно вместо запуска нового терминала подключится к
одной из существующих сессий:

![](/assets/images/os_text/lx2-2/image2.png)

Как мы можем наблюдать, терминал остался в том же состоянии, в котором
мы его оставили, когда выходили из сессии:

![](/assets/images/os_text/lx2-2/image15.png)

#### Контрольные вопросы

1.  Для чего применяется программа tmux?

2.  Будет ли выполняться процесс, запущенный в сеансе удаленного доступа после разъединения?

#### Дополнительные задания

1.  Создайте новую сессию tmux. Используйте ее для совместной работы нескольких пользователей на одной и той же удаленной машине.
