---
section: os
title: "Пользователи и их права доступа"
---


### Зачем нужно разделение доступа?

Современные операционные системы рассчитаны на использование многими пользователями одновременно. Раньше такое разделение использовалось когда компьютеры были слишком дорогими, чтобы обеспечивать ими всех работников и несколько человек могли по сети подключиться к одной рабочей станции, чтобы работать с ней. 

При работе нескольких пользователей за одной машиной необходимо разделить их полномочия. Во-первых, пользователи не должны иметь право вмешиваться в работу системы в целом. Например, если один пользователь захочет удалить установленную в системе программу, это может затронуть работу других пользователей, которые эту программу используют. Во-вторых, пользователи должны сами решать, показывать ли свои файлы и папки другим пользователям. 

Естественно, должны существовать пользователи с расширенным набором полномочий, которые могут осуществлять обслуживание системы в целом. Обычно это системные администраторы, которые ответственны за техническое состояние системы. Обычно они же управляют полномочиями пользователей: определяют, что могут, а чего не могут делать рядовые пользователи.

Сейчас, в эру персональных компьютеров когда за Вашим личным компьютером вряд ли работает много малознакомых человек, многопользовательская работа используется для двух основных сценариев:

1. Если мы говорим о пользовательских устройствах, то часто пользователи используются для разделения доступа между приложениями. Например, в ОС Android для каждого установленного приложения регистрируется новый пользователь. Таким образом, одно приложение не может вмешаться в работу другого и в работу системы в целом.
2. На серверных компьютерах все еще зачастую работают несколько человек, как системных администраторов, так и неограниченный круг пользователей, которые могут подключаться к серверу по сети и иметь доступ к некоторым данным и сервисам этого сервера. Даже на ваш персональный компьютер могут подключиться пользователи и процессы по сети и им необходимо как-то ограничить возможность действий в операционной системе.

{% capture notice-2 %}
Выводы:
1. Современные компьютеры могут использоваться несколькими пользователями одновременно.
2. Поэтому должно быть разделение и ограничение доступа к ресурсам.
3. Ресурсы - это файлы, устройства, сеть. В Linux - это все файлы.
4. Должен существовать пользователь с расширенными полномочиями.
5. Пользователи могут применяться для разделения доступа между приложениями.
6. Каждый пользователь имеет свои полномочия в системе - права доступа.
7. Необходимо придерживаться принципа минимальных прав.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Что такое пользователь?

Для операционной системы, пользователь - это тот, кто авторизовался в системе. Авторизация - это процесс сопоставления пользователя одной из учетных записей, хранящихся в системе.

Авторизация обычно построена на вводе в систему одного из возможных секретов:
1. То, что пользователь знает - авторизация по паролю или ключевой фразе. Это технически самый простой вид авторизации до сих пор широко распространен.
2. То, что пользователь имеет - физический ключ, содержащий электронный криптографический сертификат. Это развитие предыдущего способа, когда конкретный секрет скрыт для безопасности от пользователя и воплощен в какой-то физической форме.
3. То, чем пользователь является - биометрическая аутентификация. Еще недавно этот способ был очень дорогим из-за нераспространенности специализированного оборудования. Сейчас он используется все чаще, так как биометрические датчики встроены во многие смартфоны. Очень часто он используется в сочетании с другими способами (двухфакторная аутентификация).

{% capture notice-2 %}
Выводы:
1. Пользователь для ОС - это учетная запись с именем и способом аутентификации.
2. Обычно применяется аутентификация по паролю.
3. Для начала работы в системе необходимо залогиниться - пройти аутентификацию.
4. Все процессы, которые запускает пользователь выполняются от его имени и с его правами.
5. Система аутентификации встроена в само ядро операционной системы.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Где хранится информация о пользователях?



{% capture notice-2 %}
Выводы:
1. В Linux информация о всех пользователях хранится в файле /etc/passwd.
2. Изначально он хранил пароли, но их давно оттуда убрали для безопасности и удобства.
3. У каждого пользователя есть идентификатор - UID.
4. У каждого пользователя есть символьное имя - логин.
5. У пользователя может быть задан пароль на вход в систему.
6. У пользователя может быть домашняя папка, интерпретатор по умолчанию.
7. Еще можно задать много дополнительной информации - номер кабинета, телефона.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Зачем нужны группы?



{% capture notice-2 %}
Выводы:
1. Группы были придуманы для удобства назначения прав доступа нескольким пользователям.
2. В настоящее время группы используются не очень часто.
3. Гораздо чаще создается специальный пользователь с нужными правами.
4. Любой пользователь может быть членом одной или нескольких групп. 
5. Информация о группах хранится в файле /etc/group.
6. При создании пользователя автоматически создается группа с таким же именем.
7. Существует группа sudoers или sudousers - только ее члены могут использовать sudo.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Какие основные действия с пользователями и группами?



{% capture notice-2 %}
Выводы:
1. Команда useradd регистрирует нового пользователя в систему и все.
2. Команда adduser более полная - создает пользователя, домашнюю папку, задает ему пароль.
3. Команда userdel позволяет удалить пользователя.
4. Команда passwd используется для изменения пароля пользователя. 
5. Пользователь может изменить свой пароль, суперпользователь может сменить пароль кому угодно.
6. Команда usermod может изменить параметры пользователя.
7. usermod -a -G добавляет пользователя в группу.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Что такое суперпользователь?



{% capture notice-2 %}
Выводы:
1. Команда useradd регистрирует нового пользователя в систему и все.
2. Команда adduser более полная - создает пользователя, домашнюю папку, задает ему пароль.
3. Команда userdel позволяет удалить пользователя.
4. Команда passwd используется для изменения пароля пользователя. 
5. Пользователь может изменить свой пароль, суперпользователь может сменить пароль кому угодно.
6. Команда usermod может изменить параметры пользователя.
7. usermod -a -G добавляет пользователя в группу.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Что такое права доступа?



{% capture notice-2 %}
Выводы:
1. У каждого файла есть владелец и группа-владелец, которые задаются при создании файла.
2. По отношению к файлу пользователь может быть владельцем, членом группы или никем.
3. Права доступа к файлу задаются для каждой из этих трех категории пользователей.
4. Существует три базовых права доступа - на чтение, запись и выполнение.
5. Девять базовых прав доступа отображаются в атрибутах файла командой ls -l.
6. Для каталогов права доступа имеют свой смысл: чтение списка файлов, создание и удаление файлов и переход в эту папку соответственно.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Как задавать права доступа?


{% capture notice-2 %}
Выводы:
1. Новые файлы получают стандартные права доступа, заданные командой umask.
2. Можно изменить владельца и группу файла командой chown.
3. Права доступа к файлу может изменить владелец или рут командой chmod.
4. Права доступа задаются в символьном или в восьмеричном выражении.
5. Можно задать специальные биты прав доступа - SUID, SGID и Sticky-bit.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>