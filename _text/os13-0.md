---
section: os
title: "Пользователи и их права доступа"
---


### Зачем нужно разделение доступа?

Современные операционные системы рассчитаны на использование многими пользователями одновременно. Раньше такое разделение использовалось когда компьютеры были слишком дорогими, чтобы обеспечивать ими всех работников и несколько человек могли по сети подключиться к одной рабочей станции, чтобы работать с ней. 

При работе нескольких пользователей за одной машиной необходимо разделить их полномочия. Во-первых, пользователи не должны иметь право вмешиваться в работу системы в целом. Например, если один пользователь захочет удалить установленную в системе программу, это может затронуть работу других пользователей, которые эту программу используют. Во-вторых, пользователи должны сами решать, показывать ли свои файлы и папки другим пользователям. 

Естественно, должны существовать пользователи с расширенным набором полномочий, которые могут осуществлять обслуживание системы в целом. Обычно это системные администраторы, которые ответственны за техническое состояние системы. Обычно они же управляют полномочиями пользователей: определяют, что могут, а чего не могут делать рядовые пользователи.

Сейчас, в эру персональных компьютеров когда за Вашим личным компьютером вряд ли работает много малознакомых человек, многопользовательская работа используется для двух основных сценариев:

1. Если мы говорим о пользовательских устройствах, то часто пользователи используются для разделения доступа между приложениями. Например, в ОС Android для каждого установленного приложения регистрируется новый пользователь. Таким образом, одно приложение не может вмешаться в работу другого и в работу системы в целом.
2. На серверных компьютерах все еще зачастую работают несколько человек, как системных администраторов, так и неограниченный круг пользователей, которые могут подключаться к серверу по сети и иметь доступ к некоторым данным и сервисам этого сервера. Даже на ваш персональный компьютер могут подключиться пользователи и процессы по сети и им необходимо как-то ограничить возможность действий в операционной системе.

В любом случае, речь идет о разграничении доступа пользователей к ресурсам операционной системы. Под ресурсом здесь понимается любая информация, аппаратные компоненты, программы, то есть все, чем можно воспользоваться при работе за компьютером. В операционной системе Linux любые информационные ресурсы представляются в виде файла. Это позволяет иметь один механизм разделению доступа - по файлам, вместо того, чтобы отдельно ограничивать доступ к аппаратным компонентам, сети, программам и так далее. 

Любой пользователь компьютера в такой системе имеет определенные права - что-то он может делать, а что-то сама операционная система ему запретит. В Linux, так как все представляется в виде файла это выражается в том, что к каким-то файлам у пользователя есть доступ, а к каким-то нет, или он ограничен. Причем при проектировании операционных систем гораздо безопаснее и надежнее исходить их принципа минимальных прав - это когда пользователю разрешается только то, что ему необходимо делать, а все остальное - запрещается. Другими словами, все, что не разрешено явно и специально - запрещено по умолчанию. При таком подходе пользователь не сможет своими действиями нанести вред всей системе, умышленно или случайно.

{% capture notice-2 %}
Выводы:
1. Современные компьютеры могут использоваться несколькими пользователями одновременно.
2. Поэтому должно быть разделение и ограничение доступа к ресурсам.
3. Ресурсы - это файлы, устройства, сеть. В Linux - это все файлы.
5. Пользователи могут применяться для разделения доступа между приложениями.
6. Каждый пользователь имеет свои полномочия в системе - права доступа.
7. Необходимо придерживаться принципа минимальных прав.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Что такое пользователь?

![Пользователь](/assets/images/os_text/os13-0.png "Пользователь"){: .align-center style="width: 800px;"}
{: style="text-align: center; font-size:0.7em;"}

Для того, чтобы система разделения прав доступа работала, операционная система должна знать две вещи: во-первых, какие пользователи вообще существуют и каким из них является данный пользователь. Первое - это регистрация, а второе - авторизация. В первую очередь, операционная система должна хранить информацию о том, какие пользователи ей знакомы, и какими правами обладает каждый из них. Запись о пользователе в операционной системе называется учетной записью. При установке системы создается учетная запись администратора системы, могут быть созданы запись других пользователей. Администратор может потом создавать, удалять или редактировать учетные записи пользователей.

Для начала работы с операционной системой человек должен пройти процедуру авторизации - сопоставления пользователя одной из учетных записей, хранящихся в системе. 

Авторизация обычно построена на вводе в систему одного из возможных секретов:
1. То, что пользователь знает - авторизация по паролю или ключевой фразе. Это технически самый простой вид авторизации до сих пор широко распространен.
2. То, что пользователь имеет - физический ключ, содержащий электронный криптографический сертификат. Это развитие предыдущего способа, когда конкретный секрет скрыт для безопасности от пользователя и воплощен в какой-то физической форме.
3. То, чем пользователь является - биометрическая аутентификация. Еще недавно этот способ был очень дорогим из-за нераспространенности специализированного оборудования. Сейчас он используется все чаще, так как биометрические датчики встроены во многие смартфоны. Очень часто он используется в сочетании с другими способами (двухфакторная аутентификация).

В настоящее время наиболее распространена авторизация по паролю - это самый технически простой и потенциально надежный способ. В последнее время все больше распространяются способы биометрической авторизации, более сложные способы - например, двухфакторная аутентификация которая основана на авторизации на другом доверенном устройстве. Но в любом случае, авторизация - это доказательство, что вы действительно являетесь тем пользователем, который заявляется. В случае авторизации по паролю пользователь должен ввести логин (имя пользователя) и пароль. Если пароль не соответствует тому, что содержится в учетной запись данного пользователя в конфигурации операционной системы, то она откажет пользователю в работе. 

Если же авторизация проша успешно, операционная система запускает программу-оболочку. Это может быть текстовый командный интерпретатор, либо графический оконный менеджер, в зависимости от настроек и комплекта поставки системы. Но в любом случае, далее приводится в действие важный принцип, без которого невозможно надежное функционирование операционных систем и разделения доступа - все действия, которые пользователь выполняет, операционная система отслеживает и проверяет на права доступа. То есть пользователь не сможет получить доступ ни к чему, чтобы ему не было разрешено операционной системой. Более того, любая программа, команда, процесс, который запускает этот пользователь, будет работать с его правами. 

Эта система работает за счет двух фактов: во-первых, пользователь не может получить доступ ни к каким ресурсам компьютера напрямую, только через операционную систему. Например, пользователь (или, что то же самое, программа, запущенная пользователем) не может напрямую открыть файл. Пользователь может лишь попросить операционную систему открыть файл и дать ему содержимое этого файла. Обычно, это происходит быстро и прозрачно, так что создается впечатление, что сам пользователь открывает файл. И во-вторых, система проверки прав доступа "зашита" в сам фундамент операционной системы, в ее ядро. Это не позволяет обойти систему прав доступа. Каждый раз когда нужно обратиться к какому-то компьютерному ресурсу, пользователь вынужден просить об этом операционную систему, а она, в свою очередь, каждый раз проверяет, что за пользователь пытается выполнить это действие и имеет ли он на это право.

Кстати, мы обычно подразумеваем, что пользователь - это человек, который работает за компьютером. Но с точки зрения операционной системы пользователь - это учетная запись, обладающая определенными правами. Человек может авторизоваться как определенный пользователь. А потом, в процессе работы, он может авторизоваться как другой пользователь, то есть сменить учетную запись. Так что лучше считать, что пользователь - это определенная роль при работе с операционной системой. Не обязательно создавать строго по одному пользователю на каждого человека, который работает за компьютером. Иногда удобнее создать пользователя в определенными правами для выполнения конкретных действий, или для работы с определенной программой. Такие пользователи иногда называются служебными. И в любой операционной системе служебных пользователей гораздо больше, чем "реальных".

{% capture notice-2 %}
Выводы:
1. Пользователь для ОС - это учетная запись с именем и способом авторизации.
1. Первоначальная регистрация пользователей происходит при установке операционной системы.
2. Обычно применяется авторизацию по паролю.
3. Для начала работы в системе необходимо залогиниться - пройти авторизацию.
4. Все процессы, которые запускает пользователь выполняются от его имени и с его правами.
5. Система авторизации и разграничения пользователей встроена в само ядро операционной системы.
1. Существуют служебные пользователи - они не люди, а роли при работе, которые нужны для удобства.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Где хранится информация о пользователях?

![Файл /etc/passwd](/assets/images/os_text/os13-1.png "Файл /etc/passwd"){: .align-center style="width: 800px;"}
{: style="text-align: center; font-size:0.7em;"}

В любой операционной системе хранится информация о том, какие пользователи в ней зарегистрированы и могут авторизоваться для работы с ней. В Linux эта информация хранится в файле /etc/passwd. Это простой текстовый файл, как и большинство других конфигурационных файлов Linux. Его можно открыть и отредактировать любым текстовым редактором или командами работы с текстом терминала. Этот файл доступен для просмотра любому авторизованному пользователю, но редактировать его может только администратор системы.

Файл /etc/passwd представляет собой табличную структуру - каждая строка в нем соответствует одному пользователю, а в строке содержатся несколько полей, значения которых разделяются двоеточиями. Это типичная структура конфигурационного файла Linux. Надо отметить, что этот файл - это не просто отображение информации о пользователях, он и представляет собой настройку операционной системы. Она сама берет информацию о своих пользователях из этого файла. Поэтому, если этот файл отредактировать, например, добавить в него новую строку, это будет эквивалентно регистрации нового пользователя.

Любой пользователь Linux должен иметь имя - строку, которая однозначно характеризует пользователя (то есть не повторяется) и отображается во всех сообщениях системы. Имя пользователя состоит из строчных латинских букв и может содержать знаки подчеркивания. Имя пользователя так же указывается при авторизации пользователей в системе. 

Кроме символьного имени, каждому пользователю автоматически присваивается численный идентификатор. Операционной системе проще работать с числами, чем со строками, поэтому этот идентификатор, называемый UID (user identifier), используется внутри системы. Например, именно он отслеживается у всех запущенных процессов. Обычно, в современных дистрибутивах Linux идентификаторы пользователей, которые были вручную созданы при установке или настройке системы начинаются с 1000. Номера меньше 1000 зарезервированы для служебных пользователей, которые создаются автоматически разными программами. 

Кроме имени и идентификатора для авторизации пользователя нужен пароль. Раньше пароль указывался тут же, в файле /etc/passwd, вместе со всей остальной информацией о пользователе. Но по соображениям удобства, нужно, чтобы этот файл был доступен на чтение всем пользователям системы. Это нужно для организации процесса аутентификации. А если любой пользователь может прочитать этот файл, значит в нем нельзя хранить пароли. Поэтому сейчас вы не увидите паролей в файле /etc/passwd, на их месте стоит символ "х". Сами пароли (а вернее их хеши) хранятся в другом файле - /etc/shadow, который доступен для чтения только администратору системы.

Еще в файле /etc/passwd для каждого пользователя указывается адрес домашней папки. Этот адрес подставляется вместо символа ~ в путях, а также в некоторых других сокращениях команд терминала. Домашняя папка пользователя предназначена для хранения файлов этого пользователя. У любого пользователя, естественно, есть полный доступ к этой папке. То есть он может создавать, удалять там папки, файлы, организовывать любой иерархию директорий. А вот к системным папкам у пользователя может быть только ограниченный доступ - на чтения, или вообще никакого. Так же в домашней папке пользователя могут храниться конфигурационные файлы, содержащие настройки системы или отдельных программ, относящиеся только к этому пользователю.

Обычно, при регистрации нового пользователя, его домашняя папка создается автоматически в папке /home/. И называется домашняя папка так же, как и сам пользователь. То есть у пользователя user домашняя папка по умолчанию будет /home/user. Но это можно изменить в конфигурационном файле или в команде создания пользователя. Обратите внимание, что сама папка /home/ не является домашней, и принадлежит администратору. То есть сам пользователь не сможет иметь к ней полного доступа.

Кстати, служебным пользователям, которые создаются автоматически и не соответствуют живому человеку, работающему за компьютером, домашние папки обычно не нужны. В таком случае, создание домашней папки можно пропустить, а в файле /etc/passwd будет просто пропуск.

И в последнем поле файла /etc/passwd хранится команда, которая автоматически запускается после авторизации данного пользователя в систему. Обычно, это интерпретатор командной строки /bin/bash. Именно из-за этого поведения после авторизации мы обычно видим интерфейс командной строки. Но имейте в виду, что у разных пользователей может быть установлены разные командные интерпретаторы по умолчанию. Bash - это всего лишь самый распространенный из них. 

Еще при создании пользователя можно справочно установить некоторые необязательные поля - полное имя, номер кабинета, телефона. В настоящее время они практически никогда не используются и остаются пустыми. 

{% capture notice-2 %}
Выводы:
1. В Linux информация о всех пользователях хранится в файле /etc/passwd.
2. Изначально он хранил пароли, но их давно оттуда убрали для безопасности и удобства.
3. У каждого пользователя есть идентификатор - UID.
4. У каждого пользователя есть символьное имя - логин.
5. У пользователя может быть задан пароль на вход в систему.
6. У пользователя может быть домашняя папка, интерпретатор по умолчанию.
7. Еще можно задать много дополнительной информации - номер кабинета, телефона.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Зачем нужны группы?

![Файл /etc/group](/assets/images/os_text/os13-2.png "Файл /etc/group"){: .align-center style="width: 800px;"}
{: style="text-align: center; font-size:0.7em;"}

С помощью учетных записей пользователей можно организовать простое разделение доступа, но этот механизм имеет свои ограничения. Что делать, если нужно разрешить доступ к данному файлу сразу нескольким пользователям, но не другим? Для этого в операционных системах существуют группы. Группа - это просто некоторое множество зарегистрированных пользователей, права для которых можно задавать для всей группы. Это очень удобно для более сложного управления правами. С одной стороны, у нас есть множество файлов (как мы помним, в UNIX все организовано так, что любые действия с системой - это взаимодействия с определенными файлами), с другой - множество пользователей. В таком случае взаимодействие многие-ко -многим очень неудобно. Введение групп пользователей позволяет решить эту проблему.

Читатель может спросить: а что делать, если необходимо дать определенные права нескольким группам? Не оказываемся ли мы в точно таком же затруднении, как с пользователями? На самом деле нет, потому что достаточно создать новую группу, в которую входят пользователи из всех нужных групп. Поэтому такой промежуточный механизм действительно решает проблему множественных прав.

Вся необходимая системе информация о группах хранится в файле _/etc/group_. Вот фрагмент содержания такого файла:

```
root:x:0:
daemon:x:1:
adm:x:4:syslog,user
user:x:1000:user
sambashare:x:133:koroteev
vboxusers:x:134:user
test:x:1001:
```

Структура этого файла очень проста. Каждая строка соответствует зарегистрированной группе. В строчке указывается 4 значения, разделенные символом двоеточия. После имени идет пароль группы. Этот механизм когда-то использовался для защиты групповых действий паролем, но сейчас у всех групп пароль не ставят, указывая символ _x_. Затем идет численный идентификатор группы. Группы нумеруются с нуля. Обычно, системные группы, которые создаются при установке ОС или системными программами и необходимы для ее функционирования имеют номера до 999. Группы, которые создаются пользователями или пользовательскими программами имеют номера с 100 и выше. После третьего двоеточия указывается список имен пользователей-членов группы через запятую.

В примере выше мы видим, например, группу _root_. Эта служебная группа используется как группа по умолчанию для одноименного пользователя _root_. Именно группу _root_ как владельца получают файлы, созданные из-под администраторской учетки. Как видно, не во всех группах могут быть члены, некоторые группы создаются "на всякий случай", и явлются пустыми.

Примечательная группа с идентификатором 1000 и именем _user_, таким же, как и имя пользователя. Дело в том, что при создании пользователя обычно автоматически создается группа с таким же именем и это пользователь туда добавляется. Это так называемая "группа по умолчанию" для каждого пользователя. Она нужна для задания группы-владельца файлов, создаваемых пользоватем.

Еще одна группа, которая фигурирует в примере - _vboxusers_. Ее членам разрешается доступ к механизмам виртуализации и виртуальным машинам. Поэтому добавление пользователя в эту группу эквивалентно разрешению ему производить соответствующие действия. Примерно также работает системная группа _sudo_ или _sudoers_ (в зависимости от дистрибутива). Членам этой группы разрешено пользоваться программой _sudo_, которая позволяет выполнить действия от имени пользователя _root_. Поэтому если вы хотите разрешить пользователю это действие, достаточно добавить его в эту группу. 

На практике механизм групп часто используется  самой системой и системными программами. Но иногда его заменяет другой механизм - сами пользователи. Вместо того, чтобы создавать специальную группу, которой разрешены определенные действия, можно создать одного специального пользователя, придать ему все необходимые права, и при необходимости, переключаться в учетную запись этого пользователя, либо запускать программы из-под учетки этого пользователя. Так работают, например, сетевые службы и системы управления базами данных. Но такая работа имеет свои недостатки и не всегда может заменить механизм групп. Поэтому группы все еще используются, хоть и не так часто.

{% capture notice-2 %}
Выводы:
1. Группы были придуманы для удобства назначения прав доступа нескольким пользователям.
5. Информация о группах хранится в файле /etc/group.
4. Любой пользователь может быть членом одной или нескольких групп. 
6. При создании пользователя автоматически создается группа с таким же именем.
2. В настоящее время группы используются не очень часто.
3. Гораздо чаще создается специальный пользователь с нужными правами.
7. Существует группа sudoers или sudousers - только ее члены могут использовать sudo.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Что такое суперпользователь?

![Файл /etc/group](/assets/images/os_text/os13-4.png "Файл /etc/group"){: .align-center style="width: 800px;"}
{: style="text-align: center; font-size:0.7em;"}

Как мы говорили, пользователи в операционной системе нужны для разделения доступа - чтобы один пользователь в своей работе не мог никак нарушить работу другого пользователя. Поэтому учетные записи "обычных" пользователей в многопользовательских операционных системах всегда сильно ограничены в том, что они могут делать. Естественно, они не могут иметь доступ к файлам других пользователей (если те не разрешают это явно). Но еще они не могут выполнять действия, имеющие глобально влияние на всю операционную систему. Например, пользователи не должны менять общесистемные настройки, удалять общее программное обеспечение и так далее. 

Но, конечно, иногда такие общесистемные действия приходится кому-то выполнять. Раньше, когда компьютеры были большими, корпоративными и действительно многопользовательскими, такую работу выполняли специально назначенные системные администраторы, которые по службе отвечали за настройку и поддержание работы системы. Сейчас зачастую компьютеры эксплуатируются в индивидуальном режиме, но название "администратор" для обозначения пользователя с расширенными правами осталось.

В UNIX-системах эта проблема решается простым и кардинальным способом. Существует специальный, особый пользователь _root_, которому в системе разрешено вообще все. В других операционных системах могут быть пользователи с разными уровнями доступа, здесь же все просто - либо обычный, ограниченный пользователь, либо _root_. Это особый пользователь всегда называется именно _root_, имеет идентификатор пользователя 0, всегда создается при установке системы. Удалить или переименовать его нельзя, это глубоко зашито в логику работы самой операционной системы. 

Пользователь _root_ нужен именно для выполнения операций, затрагивающих систему в целом - установка и удаление программ, редактирование общесистемных настроек, управление пользователями (создание, удаление), управление системными службами и так далее. Это пользователь настолько не ограничен, что несовсем правильно даже говорить, что ему все разрешено. При совершении действий под учетной записью _root_ права доступа даже не проверяются.

{% capture notice %}
Это в частности значит, что _root_ даже сам не может что-то себе запретить. Попробуйте на досуге создать файл (под любым пользователем, даже под рутом) и запретить всем любой доступ к нему, _root_ все равно будет иметь к нему полный доступ. На этого пользователя просто не распространяется система прав доступа UNIX.
{% endcapture %}
<div class="notice--warning">{{ notice | markdownify }}</div> 

Есть еще одна причина, почему обычным пользователям не разрешается выполнять общесистемные действия. Такие действия несут потенциальную опасность. Обычные пользователи так ограничены, что любыми совими действиями они могут нарушить только свою собственную работу. На работу системы в целом они повлиять никак не могут. Администратор _root_ же напротив, может легко "сломать" всю систему целиком. Это особенно актуально сейчас, в эру персональных компьютеров. Не все владельцы ПК являются профессиональными системными администраторами. Поэтому лучше для обычных дел - редактирования файлов, использования браузера, и подобных - использовать учетную запись обычного пользователя. 

Но выполнять настроечные, общесистемные действия все равно приходится регулярно и довольно часто. Каждый раз выходить их сеанса (то есть закрывать все запущенные процессы) и входить в сеанс рута, а потом обратно, очень неудобно. Для ускорения процесса есть две команды - _sudo_ и _sudo su_. Команда _sudo_ позволяет выполнить любую другую команду терминала с правами рута. Естественно, для этого нужно знать пароль рута. Так что система разделения прав доступа здесь не нарушается. Синтаксис команды _sudo_ очень простой:

```bash
$ sudo <команда>
```

Команда _sudo su_ позволяет временно (без выхода из сеанса) перети в сеанс рута. Она полезна, если нужно от имени администратора выполнить сразу много команд и неудобно перед каждой писать "sudo". 

Этими командами надо пользоваться с осторожностью, так как они потенциально могут нарушить работу системы. Особенно аккуратно надо быть с командами, которые вы нашли в интернете для решения какой-то проблемы. Ведь они могут быть вредны (сознательно, а чаще несознательно). Желательно все-таки хотя бы в общих чертах понимать, что вы делаете, как работают те или иные команды и какие последствия будут от их применения. Если бездумно применять нагугленные команды рано или поздно вы обрушите все систему до состояния, когда восстановить ничего уже будет нельзя (и поверьте, любой системный администратор был в такой ситуации хотя бы однажды). Да и о работе системы ничего полезного не узнаете.

{% capture notice %}
Обращаем внимание! Никогда не работайте постоянно под учетной запись _root_. Это очень опасно. Даже опытные администраторы предпочитают пользоваться командой _sudo_. От ошибок никто не застрахован, но работа в учетке обычного пользователя и регулярные бекапы могут свести последствия к минимуму.
{% endcapture %}
<div class="notice--danger">{{ notice | markdownify }}</div>

{% capture notice-2 %}
Выводы:
1. Обычные пользовательские учетные записи сильно ограничены в правах.
1. Иногда необходимо произвести действия, оказывающие влияние на всю систему.
1. Для этого есть специальная учетная запись администратора - root.
1. Во всех Linux-системах существует пользователь root с идентификатором 0.
1. Именно под учетной записью администратора нужно выполнять общесистемные действия: настройка, установка и удаление программ, добавление пользователей.
1. Постоянно работать под учетной записью root категорически не рекомендуется, лучше иметь обычную учетку.
1. Чтобы каждый раз не перелогиниваться для выполнения администраторских команд, есть специальная команда sudo.
1. Командой sudo надо пользоваться с осторожностью, так как такие команды могут повредить работу операционной системы.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Какие основные действия с пользователями и группами?

![Файл /etc/group](/assets/images/os_text/os13-3.png "Файл /etc/group"){: .align-center style="width: 800px;"}
{: style="text-align: center; font-size:0.7em;"}

Теперь, когда мы познакомились с основными механизмами учетных записей пользователей, необходимо узнать, как совершать те или иные операции с пользователями. Надо сказать, что вся информация о пользователях и группах хранится в конфигурационных файлах (_/etc/passwd_, _/etc/shadow_, _/etc/group_). Это не просто информационные файлы, это и есть сама конфигурация. Поэтому необходимую настройку можно делать непосредственно изменяя эти файлы. Но это неудобно и чревато ошибками. Ведь если вы нарушите синтаксис этих файлов, это может сломать всю систему.

Поэтому в составе дистрибутивов существуют служебные программы, которые автоматизируют и облегчают основные настроечные действия. В этом разделе мы рассмотрим только самые основные, которые чаще всего приходится совершать. Остальные команды и действия можно найти в соответствующих справочниках и документации.

Команда _useradd_ позволяет добавить нового пользователя в систему. У нее есть один обязательный аргумент - имя нового пользователя.

```bash
sudo useradd test_user
```

Обратите внимание, что это действие - добавление пользователя - является общесистемным, поэтому может быть выполнено только администратором системы, то есть пользователем _root_. Здесь и далее мы будем обозначать это в командной строке использованием команды _sudo_. Если попытаться выполнить такую команду простым пользователем, вы получите ошибку _Permission denied_.

Команда _useradd_ только лишь добавляет учетную запись пользователя без какой-либо другой информации. Сразу пользоваться этой новой учеткой будет нельзя - ведь у нового пользователя не установлен пароль. Установить или изменить пароль пользователя можно командой _passwd_:

```bash
passwd test_user
```

При выполнении этой команды вам будет предложено ввести новый пароль пользователя два раза - для надежности. А если пароль уже существовал, тогда еще придется ввести старый пароль. Обратите внимание, на этот раз команда _sudo_ не обязательна - ведь пользователь может использовать команду _passwd_ для изменения собственного пароля. Изменить пароль других пользователей, конечно, нельзя. А вот _root_ может менять пароли любых пользователей.

Кроме имени пользователя и пароля у учетной записи есть еще много информации. Существует команда _adduser_, которая позволяет создать нового пользователя и сразу задать ему основную информацию, и парль в том числе:

```bash
sudo adduser test_user
	Adding user `test_user' ...
	Adding new group `test_user' (1001) ...
	Adding new user `test_user' (1001) with group `test_user' ...
	New password: 
	Retype new password: 
	passwd: password updated successfully
	Changing the user information for test
	Enter the new value, or press ENTER for the default
		Full Name []: 
		Room Number []: 
		Work Phone []: 
		Home Phone []: 
		Other []: 
	Is the information correct? [Y/n] Y
```

На примере выше видно, какую информацию можно задать. Большая часть этих полей носит справочный характер и чаще всего не используется. Поэтому ее просто можно оставить пустой.

Если хочется изменить эту информацию для уже существующего пользователя, вам понадобится команда _usermod_:

```bash
sudo usermod test_user
```

У этой команды вообще много опций, которые позволят отдельно задать конкретные параметры пользователя. Полный список опций доступен в _man usermod_.

Удалить пользователя можно командой _userdel_ или _deluser_:

```bash
sudo userdel test_user
```

Существуют аналоги этих команд для создания, удаления и изменения групп - соответственно _groupadd_, _groupdel_ и _groupmod_. Рассматривать их подробно мы не будем.

Из операций с группами чаще вего используется добавление пользователя в группу. Это происходит при помощи уже известной команды _usermod_ с определенными опциями, которые стоит запомнить:

```bash
sudo usermod -a -G group_name user_name
```

{% capture notice-2 %}
Выводы:
1. Команда useradd регистрирует нового пользователя в систему и все.
2. Команда adduser более полная - создает пользователя, домашнюю папку, задает ему пароль.
3. Команда userdel позволяет удалить пользователя.
4. Команда passwd используется для изменения пароля пользователя. 
5. Пользователь может изменить свой пароль, суперпользователь может сменить пароль кому угодно.
6. Команда usermod может изменить параметры пользователя.
7. usermod -a -G добавляет пользователя в группу.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Что такое права доступа?

![Файл /etc/group](/assets/images/os_text/os13-5.png "Файл /etc/group"){: .align-center style="width: 800px;"}
{: style="text-align: center; font-size:0.7em;"}

{% capture notice-2 %}
Выводы:
1. У каждого файла есть владелец и группа-владелец, которые задаются при создании файла.
2. По отношению к файлу пользователь может быть владельцем, членом группы или никем.
3. Права доступа к файлу задаются для каждой из этих трех категории пользователей.
4. Существует три базовых права доступа - на чтение, запись и выполнение.
5. Девять базовых прав доступа отображаются в атрибутах файла командой ls -l.
6. Для каталогов права доступа имеют свой смысл: чтение списка файлов, создание и удаление файлов и переход в эту папку соответственно.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Как задавать права доступа?

{% capture block %}
|OCT|BIN|Mask|Права на файл|Права на каталог|
|---|---|----|-------------|----------------|
|0|000|- - -|отсутствие прав|отсутствие прав|
|1|001|- - x|запуск на выполнение|доступ к файлам и их атрибутам|
|2|010|- w -|изменение содержимого|создание и удаление файлов|
|3|011|- w x|права на запись и выполнение|все, кроме доступа к именам файлов|
|4|100|r - -|чтение содержимого|только чтение имен файлов|
|5|101|r - x|права на чтение и выполнение|чтение имен файлов и доступ файлам и их атрибутам|
|6|110|r w -|права на чтение и запись|только чтение имен файлов|
|7|111|r w x|полные права|все права|
{% endcapture %}
<div class="presentation">{{ block | markdownify }}</div>



```bash
sudo chown new_owner:new_group file1 file2 …
hmod 755 file
chmod u+w file
chmod go-rw file_name
chmod ugo+rwx file_name
chmod +x file_name
```

{% capture notice-2 %}
Выводы:
1. Новые файлы получают стандартные права доступа, заданные командой umask.
2. Можно изменить владельца и группу файла командой chown.
3. Права доступа к файлу может изменить владелец или рут командой chmod.
4. Права доступа задаются в символьном или в восьмеричном выражении.
5. Можно задать специальные биты прав доступа - SUID, SGID и Sticky-bit.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>